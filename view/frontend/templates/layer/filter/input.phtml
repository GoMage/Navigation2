
<?
/**
 *
 * @var $block \GoMage\Navigation\Block\Navigation\FilterRenderer
 */

$filter = reset($filterItems)->getFilter();
$attributeModel = $filter->getAttributeModel();
$priceValues = explode(';', $filter->getSingleValue());
?>

<div class="gan-filter gan-filter-input">
    <?=$block->getTooltip($filter)->toHtml()?>
    <form>
        <input style="display: none;"
               data-role="navigation-filter"
               data-active=""
               data-from="<?= $block->escapeHtmlAttr($filter->getMinBasePrice()); ?>"
               data-to="<?= $block->escapeHtmlAttr($filter->getMaxBasePrice()); ?>"
               data-code="<?= $block->escapeHtmlAttr($filter->getAttributeModel()->getAttributeCode()); ?>"
               data-param="<?=$block->escapeHtmlAttr($filter->getRequestVar()) ?>"
            <?if ($filter->getGomageIsAjax() || is_null($filter->getGomageIsAjax())):?>
                data-ajax="1"
            <?else:?>
                data-ajax="0"
            <?endif;?>
               id="<?= $block->escapeHtmlAttr($filter->getAttributeModel()->getAttributeCode()); ?>"
               value="<?= $block->escapeHtmlAttr($filter->getSingleValue()) ?>"/>
        <fieldset class="gan-filter-input-fieldset">

            <div class="gan-filter-input-fields">
                <div class="from-wrapper">
                    <label>
                        <input
                                id="price-from"
                            <? if(!$filter->getGomageIsShowFilterButton()):?>
                                data-role="navigation-filter"
                                data-type="input-price"
                            <?endif;?>
                            <?if ($filter->getGomageIsAjax() || is_null($filter->getGomageIsAjax())):?>
                                data-ajax="1"
                            <?else:?>
                                data-ajax="0"
                            <?endif;?>
                                type="text"
                                value="<?= $block->escapeHtmlAttr($priceValues[0]); ?>"
                                name="<?= $block->escapeHtmlAttr($attributeModel->getAttributeCode());?>_from"
                                />
                    </label>
                </div>
                <div class="to-text-wrapper">
                    <span><?= __('to')?></span>
                </div>
                <div class="to-wrapper">
                    <label>
                        <input id="price-to"
                            <? if(!$filter->getGomageIsShowFilterButton()):?>
                               data-role="navigation-filter"
                               data-type="input-price"
                            <?endif;?>
                            <?if ($filter->getGomageIsAjax() || is_null($filter->getGomageIsAjax())):?>
                                data-ajax="1"
                            <?else:?>
                                data-ajax="0"
                            <?endif;?>
                                type="text"
                                value="<?= $block->escapeHtmlAttr($priceValues[1]); ?>"
                                name="<?= $block->escapeHtmlAttr($attributeModel->getAttributeCode());?>_to"
                                />
                    </label>
                </div>
            </div>

            <? if($filter->getGomageIsShowFilterButton()):?>
                <div class="gan-filter-input-actions">
                    <button
                            id="price-button"
                            data-role="navigation-filter"
                            data-type="price-button"
                            class="gan-custom-button"
                            type="submit"
                        <?if ($filter->getGomageIsAjax() || is_null($filter->getGomageIsAjax())):?>
                            data-ajax="1"
                        <?else:?>
                            data-ajax="0"
                        <?endif;?>
                            style="
                            <?if($block->getNavigationViewHelper()->isNavigationViewButtonsGradient() && !empty($block->getNavigationViewHelper()->getNavigationViewButtonsBackgroundColor2())):?>
                                    background: linear-gradient(to bottom, <?=$block->getNavigationViewHelper()->getNavigationViewButtonsBackgroundColor()?>, <?=$block->getNavigationViewHelper()->getNavigationViewButtonsBackgroundColor2()?>);
                                    <?elseif(!empty($block->getNavigationViewHelper()->getNavigationViewButtonsBackgroundColor())):?>
                                    background: <?=$block->getNavigationViewHelper()->getNavigationViewButtonsBackgroundColor()?>;
                                    <?endif;?>
                            <?if(!empty($block->getNavigationViewHelper()->getNavigationViewButtonsTextColor())):?>
                                    color: <?=$block->getNavigationViewHelper()->getNavigationViewButtonsTextColor()?>
                                    <?endif;?>
                                    ">

                        <span><?= __('Filter'); ?></span>
                    </button>
                </div>
            <? endif;?>
            <?if($filter->isActive() && $filter->getGomageIsReset()):?>
                <a
                        data-role="navigation-filter"
                        data-value=""
                        data-url="<?= $block->escapeUrl($filter->getRemoveUrl()) ?>"
                        data-param="<?=$block->escapeHtmlAttr($filter->getRequestVar()) ?>"
                    <?if ($filter->getGomageIsAjax() || is_null($filter->getGomageIsAjax())):?>
                        data-ajax="1"
                    <?else:?>
                        data-ajax="0"
                    <?endif;?>
                        data-type="remove-item"
                        data-active="1"
                        href="#">
                    <?= __('Reset'); ?>
                </a>
            <?endif;?>

        </fieldset>
    </form>
</div>