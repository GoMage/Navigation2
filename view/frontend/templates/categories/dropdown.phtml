<?php
$dataHelper = $this->helper('GoMage\Navigation\Helper\Data');
$categories = $this->getStoreCategories(true, false, true);
$categoryHelper = $this->getCategoryHelper();
?>
<div class="block block-gan-categories gan-categories-dropdown gan-sidebar-position">
    <div class="block-title gan-categories-title" data-role="navigation-filter" data-type="categories-content">
        <strong><?php echo __('Categories') ?></strong>
    </div>
    <div class="block-content block-content-gan-categories">
        <div class="gan-categories-list-dropdown" <? echo ($dataHelper->isCategoriesShowCollapsed()) ? 'style="display:none;"' : '';?>>
            <?php
            foreach($categories as $category):
                if (!$category->getIsActive()) continue;?>
                    <select data-role="navigation-filter" data-type="categories-select" data-ajax="1">
                        <option
                            <?= ($block->getCurrentCategoryId() == $category->getId()) ? 'selected' : ''; ?>
                                value="<?php echo $categoryHelper->getCategoryUrl($category) ?>">
                            <?php echo $category->getName() ?>
                        </option>
                        <?= $block->getSelectList($block->getChildCategories($category)); ?>
                        <?// if (!$childrenCategories = $this->getChildCategories($category)) continue; ?>

                    </select>
            <?php endforeach; ?>
        </div>
    </div>
</div>