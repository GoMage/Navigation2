<?php
$dataHelper = $this->helper('GoMage\Navigation\Helper\Data');
$categories = $this->getStoreCategories(true, false, true);
$categoryHelper = $this->getCategoryHelper();
?>
<div class="block block-gan-categories gan-sidebar-position
    <?php if($dataHelper->getCategoriesNavigationType() == \GoMage\Navigation\Model\Config\Source\Navigation::DEFAULTS) echo 'gan-categories-default'; ?>
    <?php if($dataHelper->getCategoriesNavigationType() == \GoMage\Navigation\Model\Config\Source\Navigation::IN_BLOCK) echo 'gan-categories-default gan-categories-in-block'; ?>
    <?php if($dataHelper->getCategoriesNavigationType() == \GoMage\Navigation\Model\Config\Source\Navigation::FLY_OUT) echo 'gan-categories-flyout'; ?>
    ">
    <div class="block-title gan-categories-title" data-role="navigation-filter" data-type="categories-content">
        <strong><?php echo __('Categories') ?></strong>
    </div>
    <div class="block-content block-content-gan-categories"<?php if($dataHelper->getCategoriesNavigationType() == \GoMage\Navigation\Model\Config\Source\Navigation::IN_BLOCK && $dataHelper->getMaxBlockHeightCategories()): ?> style="max-height:<?php echo $dataHelper->getMaxBlockHeightCategories(); ?>px;"<?endif;?>>
        <div <? echo ($dataHelper->isCategoriesShowCollapsed()) ? 'style="display:none;"' : '';?>>
            <ul class="gan-categories-list" <?= ($dataHelper->isShowCheckboxes()) ? :''; ?>>
                <?php
                foreach($categories as $category):
                     if (!$category->getIsActive()) continue;?>
                    <li data-ajax="1" data-role="navigation-filter" data-type="categories-li" data-url="<?= $categoryHelper->getCategoryUrl($category) ?>">
                        <a class="<?= ($block->getCurrentCategoryId() == $category->getId()) ? 'active' : ''; ?>"
                           href="#"> <?= $category->getName() ?></a>
                    </li>
                    <?= $block->getOlList($block->getChildCategories($category)); ?>
                <?php endforeach; ?>
            </ul>
        </div>
    </div>
</div>
